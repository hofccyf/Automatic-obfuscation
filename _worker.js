function a0a(){const Y=['113566NDJYxn','传输完成','无效的\x20SOCKS\x20地址格式：端口号必须是数字','.tp','发送HTTP\x20CONNECT请求失败:','proxyip.','proxyip','resolve','values','Access','DNS缓存记录','test','fill','443448wYIhlO','has','124400TAKavF','%3D','6KiYWpC','getWriter','filter','Host:\x20','set','HTTP/1.0\x20200','发送HTTP\x20CONNECT请求失败:\x20','enqueue','padStart','11715396GgDnnZ','byteLength','url','Proxy-Connection:\x20Keep-Alive\x0d\x0a','所有SOCKS5账号失效','random','解析SOCKS5地址失败:','join','includes','处理剩余数据错误:','get','HTTP代理连接中断','pipeTo','无效的\x20SOCKS\x20地址格式：IPv6\x20地址必须用方括号括起来，如\x20[2001:db8::1]','Hello\x20World!','message','130cfUaNS','decode','releaseLock','colo','无效的\x20SOCKS\x20地址格式：认证部分必须是\x20\x22username:password\x22\x20的形式','18KBPZvJ','1702212FrjuqN','lastIndexOf','5iqZSDD','now','length','startsWith','write','1612709RCOaWa','readable','substring','.PROXyIP.CMLIussss.NET','216491uuzdjs','HTTP代理连接失败:\x20','HTTP代理连接失败:\x20未收到成功响应','encode','Proxy-Authorization:\x20Basic\x20','websocket','socks5','error','toLowerCase','replaceAll','close','endsWith','data','accept','99WDYnRp','split','flatMap','value','usip.88888888.xx.kg','IPv6地址格式错误','HTTP/1.1\x20200','map','opened','pop','UUID验证失败','\x0d\x0a\x0d\x0a','https://1.1.1.1/dns-query','application/dns-message','slice','getReader','read','replace','getUint16','send','floor','writable','then','globalproxy','toString','，地址类型:\x20','match','处理HTTP代理响应失败:\x20','arrayBuffer','http','catch'];a0a=function(){return Y;};return a0a();}const a0L=a0b;(function(a,b){const K=a0b,c=a();while(!![]){try{const d=-parseInt(K(0x9f))/0x1+-parseInt(K(0x92))/0x2*(parseInt(K(0xc1))/0x3)+parseInt(K(0xc2))/0x4*(parseInt(K(0xc4))/0x5)+-parseInt(K(0xa3))/0x6*(parseInt(K(0xc9))/0x7)+-parseInt(K(0xa1))/0x8*(-parseInt(K(0x73))/0x9)+-parseInt(K(0xbc))/0xa*(parseInt(K(0xcd))/0xb)+parseInt(K(0xac))/0xc;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x49da4));const a0c='58889888-8888-8888-8888-588898885888';import{connect}from'cloudflare:sockets';let a0d=a0L(0x77),a0e=null,a0f=![],a0g='',a0h={},a0i=![],a0j=0x40;export default{async 'fetch'(a){const M=a0L;a0d=a0d?a0d:a['cf'][M(0xbf)]+M(0xcc);if(a['headers'][M(0xb6)]('Upgrade')===M(0x6a)){await a0p(a);const [b,c]=Object[M(0x9a)](new WebSocketPair());return c[M(0x72)](),a0k(c),new Response(null,{'status':0x65,'webSocket':b});}else return new Response(M(0xba),{'status':0xc8});}};function a0b(a,b){a=a-0x6a;const c=a0a();let d=c[a];return d;}async function a0k(a,b){const N=a0L;let c,d,f,g=![],h=null,i,j,k=Promise[N(0x99)](),l=0x0,m=performance[N(0xc5)]();try{a['addEventListener'](N(0xbb),async p=>{const O=N;!g?(g=!![],h=n(p[O(0x71)]),k=k[O(0x89)](()=>h)['catch'](q=>{throw q;}),l+=p['data'][O(0xc6)]):(await h,k=k['then'](()=>i[O(0xc8)](p['data']))['catch'](q=>{throw q;}),l+=p[O(0x71)][O(0xc6)]);});async function n(p){const P=N,q=new Uint8Array(p),r=q[0x0],s=(y,z=0x0)=>[...y['slice'](z,z+0x10)][P(0x7a)](A=>A[P(0x8b)](0x10)[P(0xab)](0x2,'0'))['join']('')['replace'](/(.{8})(.{4})(.{4})(.{4})(.{12})/,'$1-$2-$3-$4-$5');if(a0c&&s(q[P(0x81)](0x1,0x11))!==a0c)throw new Error(P(0x7d));a[P(0x86)](new Uint8Array([r,0x0]));const t=0x12+q[0x11]+0x1,u=new DataView(q['buffer'],t,0x2)[P(0x85)](0x0);if(u===0x35){const y=q['slice'](t+0x9),z=await fetch(P(0x7f),{'method':'POST','headers':{'content-type':P(0x80)},'body':y}),A=await z[P(0x8f)](),B=new Uint8Array([A[P(0xad)]>>0x8&0xff,A['byteLength']&0xff]);a[P(0x86)](await new Blob([B,A]));return;}const v=t+0x2;c=q[v];let w=v+0x1;switch(c){case 0x1:f=0x4,d=q[P(0x81)](w,w+f)[P(0xb3)]('.');break;case 0x2:f=q[w],w+=0x1;const C=new TextDecoder()['decode'](q[P(0x81)](w,w+f));d=C;break;case 0x3:f=0x10;const D=[],E=new DataView(q['buffer'],w,0x10);for(let F=0x0;F<0x8;F++)D['push'](E['getUint16'](F*0x2)['toString'](0x10));d=D[P(0xb3)](':');break;default:throw new Error('无效的访问地址');}if(d[P(0xb4)](atob('c3BlZWQuY2xvdWRmbGFyZS5jb20=')))throw new Error(P(0x9b));if(a0e=='socks5'&&a0f)b=await a0l(c,d,u);else{if(a0e==P(0x90)&&a0f)b=await a0o(d,u);else try{if(c===0x3){const G='['+d+']';b=connect({'hostname':G,'port':u});}else b=connect({'hostname':d,'port':u});await b['opened'];}catch{if(a0e==P(0x6b))b=await a0l(c,d,u);else{if(a0e=='http')b=await a0o(d,u);else{const [H,I]=await a0n(a0d);b=connect({'hostname':H,'port':I});}}}}await b['opened'],i=b[P(0x88)]['getWriter'](),j=b[P(0xca)][P(0x82)]();const x=q[P(0x81)](w+f);if(x)try{await i[P(0xc8)](x);}catch(J){throw J;};o();}async function o(){const Q=N;while(!![]){await k;const {done:p,value:q}=await j[Q(0x83)]();if(q&&q[Q(0xc6)]>0x0){if(a0i){let r=0x0,s=a0j;while(r<q[Q(0xc6)]){const t=q[Q(0x81)](r,r+s);k=k[Q(0x89)](()=>a[Q(0x86)](t))[Q(0x91)](u=>{throw u;}),r+=s;}}else k=k[Q(0x89)](()=>a[Q(0x86)](q))[Q(0x91)](u=>{throw u;});}l+=q['length'];if(p)break;}throw new Error(Q(0x93));}}catch(p){try{await b[N(0x6f)]?.();}catch{};a[N(0x6f)]?.();}}globalThis[a0L(0x9c)]=globalThis[a0L(0x9c)]??=new Map();async function a0l(a,b,c,d,e,f){const R=a0L;let g,h,i,j,k;try{({username:h,password:i,hostname:j,port:k}=a0h,g=connect({'hostname':j,'port':k}),await g[R(0x7b)],e=g[R(0x88)][R(0xa4)](),f=g[R(0xca)][R(0x82)]());const l=new TextEncoder(),m=new Uint8Array([0x5,0x2,0x0,0x2]);await e['write'](m);const n=(await f[R(0x83)]())['value'];if(n[0x1]===0x2){if(!h||!i)throw new Error('未配置账号密码');const q=new Uint8Array([0x1,h[R(0xc6)],...l[R(0xd0)](h),i[R(0xc6)],...l[R(0xd0)](i)]);await e[R(0xc8)](q);const r=(await f[R(0x83)]())[R(0x76)];if(r[0x0]!==0x1||r[0x1]!==0x0)throw new Error('账号密码错误');}switch(a){case 0x1:d=new Uint8Array([0x1,...b[R(0x74)]('.')[R(0x7a)](Number)]);break;case 0x2:d=new Uint8Array([0x3,b[R(0xc6)],...l[R(0xd0)](b)]);break;case 0x3:d=s(b);function s(t){const S=R,u=t[S(0xc7)]('[')&&t[S(0x70)](']')?t[S(0x81)](0x1,-0x1):t,v=u['split']('::'),w=v[0x0]?v[0x0][S(0x74)](':')[S(0xa5)](Boolean):[],x=v[0x1]?v[0x1]['split'](':')[S(0xa5)](Boolean):[],y=0x8-(w['length']+x[S(0xc6)]);if(y<0x0)throw new Error(S(0x78));const z=[...w,...Array(y)[S(0x9e)]('0'),...x],A=z[S(0x75)](B=>{const C=parseInt(B||'0',0x10);return[C>>0x8&0xff,C&0xff];});return new Uint8Array([0x4,...A]);}break;}const o=new Uint8Array([0x5,0x1,0x0,...d,c>>0x8,c&0xff]);await e[R(0xc8)](o);const p=(await f[R(0x83)]())[R(0x76)];if(p[0x0]!==0x5||p[0x1]!==0x0)throw new Error('目标地址连接失败，访问地址:\x20'+b+R(0x8c)+a);return e['releaseLock'](),f[R(0xbe)](),g;}catch{};e?.[R(0xbe)](),f?.[R(0xbe)](),await g?.[R(0x6f)]();throw new Error(R(0xb0));}async function a0m(a){const T=a0L,b=a[T(0xc3)]('@');let [c,d]=b===-0x1?[a,undefined]:[a[T(0xcb)](b+0x1),a[T(0xcb)](0x0,b)],e,f,g,h;if(d){const k=d[T(0x74)](':');if(k[T(0xc6)]!==0x2)throw new Error(T(0xc0));[e,f]=k;}const i=c[T(0x74)](':');if(i[T(0xc6)]>0x2&&c[T(0xb4)](']:'))h=Number(c['split'](']:')[0x1][T(0x84)](/[^\d]/g,'')),g=c['split'](']:')[0x0]+']';else i[T(0xc6)]===0x2?(h=Number(i[T(0x7c)]()[T(0x84)](/[^\d]/g,'')),g=i[T(0xb3)](':')):(h=0x50,g=c);if(isNaN(h))throw new Error(T(0x94));const j=/^\[.*\]$/;if(g[T(0xb4)](':')&&!j['test'](g))throw new Error(T(0xb9));return{'username':e,'password':f,'hostname':g,'port':h};}async function a0n(a){const U=a0L;a=a['toLowerCase']();let b=a,c=0x1bb;if(a[U(0xb4)](U(0x95))){const d=a[U(0x8d)](/\.tp(\d+)/);if(d)c=parseInt(d[0x1],0xa);return[b,c];}if(a[U(0xb4)](']:')){const e=a[U(0x74)](']:');b=e[0x0]+']',c=parseInt(e[0x1],0xa)||c;}else{if(a['includes'](':')&&!a[U(0xc7)]('[')){const f=a[U(0xc3)](':');b=a[U(0x81)](0x0,f),c=parseInt(a[U(0x81)](f+0x1),0xa)||c;}}return[b,c];}async function a0o(a,b){const V=a0L,{username:c,password:d,hostname:e,port:f}=a0h,g=await connect({'hostname':e,'port':f});let h='CONNECT\x20'+a+':'+b+'\x20HTTP/1.1\x0d\x0a';h+=V(0xa6)+a+':'+b+'\x0d\x0a';if(c&&d){const m=c+':'+d,n=btoa(m);h+=V(0xd1)+n+'\x0d\x0a';}h+='User-Agent:\x20Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x0d\x0a',h+=V(0xaf),h+='Connection:\x20Keep-Alive\x0d\x0a',h+='\x0d\x0a';try{const o=g[V(0x88)][V(0xa4)]();await o['write'](new TextEncoder()['encode'](h)),o['releaseLock']();}catch(p){console[V(0x6c)](V(0x96),p);throw new Error(V(0xa9)+p[V(0xbb)]);}const i=g[V(0xca)][V(0x82)]();let j='',k=![],l=new Uint8Array(0x0);try{while(!![]){const {value:q,done:r}=await i['read']();if(r){console[V(0x6c)](V(0xb7));throw new Error(V(0xb7));}const s=new Uint8Array(l[V(0xc6)]+q[V(0xc6)]);s[V(0xa7)](l),s['set'](q,l[V(0xc6)]),l=s,j=new TextDecoder()[V(0xbd)](l);if(j[V(0xb4)](V(0x7e))){const t=j['indexOf'](V(0x7e))+0x4,u=j[V(0xcb)](0x0,t);if(u['startsWith'](V(0x79))||u[V(0xc7)](V(0xa8))){k=!![];if(t<l[V(0xc6)]){const v=l[V(0x81)](t),w=new ReadableStream({'start'(z){const W=V;z[W(0xaa)](v);}}),{readable:x,writable:y}=new TransformStream();w[V(0xb8)](y)[V(0x91)](z=>console[V(0x6c)](V(0xb5),z)),g[V(0xca)]=x;}}else{const z=V(0xce)+u['split']('\x0d\x0a')[0x0];console[V(0x6c)](z);throw new Error(z);}break;}}}catch(A){i[V(0xbe)]();throw new Error(V(0x8e)+A[V(0xbb)]);}i['releaseLock']();if(!k)throw new Error(V(0xcf));return g;}async function a0p(a){const X=a0L,b=new URL(a[X(0xae)]),{pathname:c,searchParams:d}=b,e=c[X(0x6d)]();a0g=d[X(0xb6)](X(0x6b))||d['get'](X(0x90))||null,a0f=d[X(0xa0)](X(0x8a))||![];const f=e[X(0x8d)](/\/(proxyip[.=]|pyip=|ip=)(.+)/);if(d[X(0xa0)]('proxyip')){const h=d['get'](X(0x98));a0d=h[X(0xb4)](',')?h['split'](',')[Math[X(0x87)](Math[X(0xb1)]()*h[X(0x74)](',')[X(0xc6)])]:h;return;}else{if(f){const i=f[0x1]===X(0x97)?X(0x97)+f[0x2]:f[0x2];a0d=i['includes'](',')?i[X(0x74)](',')[Math[X(0x87)](Math['random']()*i[X(0x74)](',')[X(0xc6)])]:i;return;}}let g;if(g=c[X(0x8d)](/\/(socks5?|http):\/?\/?(.+)/i)){a0e=g[0x1][X(0x6d)]()===X(0x90)?X(0x90):'socks5',a0g=g[0x2]['split']('#')[0x0],a0f=!![];if(a0g[X(0xb4)]('@')){const j=a0g[X(0xc3)]('@');let k=a0g[X(0xcb)](0x0,j)[X(0x6e)](X(0xa2),'=');/^(?:[A-Z0-9+/]{4})*(?:[A-Z0-9+/]{2}==|[A-Z0-9+/]{3}=)?$/i[X(0x9d)](k)&&!k[X(0xb4)](':')&&(k=atob(k)),a0g=k+'@'+a0g[X(0xcb)](j+0x1);}}else{if(g=c[X(0x8d)](/\/(g?s5|socks5|g?http)=(.+)/i)){const l=g[0x1][X(0x6d)]();a0g=g[0x2],a0e=l[X(0xb4)](X(0x90))?X(0x90):X(0x6b),a0f=l[X(0xc7)]('g')||a0f;}}if(a0g)try{a0h=await a0m(a0g),a0e=d[X(0xb6)](X(0x90))?X(0x90):a0e;}catch(m){console[X(0x6c)](X(0xb2),m[X(0xbb)]),a0e=null;}else a0e=null;}